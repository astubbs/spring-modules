<!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN//EN" "http://www.springframework.org/dtd/spring-beans.dtd">

<beans>
    
    <bean name="prevalenceInfo" class="org.springmodules.prevayler.system.PrevalenceInfo">
        <property name="prevalentClasses">
            <list>
                <value>org.springmodules.prevayler.test.domain.Employee</value>
                <value>org.springmodules.prevayler.test.domain.Office</value>
            </list>
        </property>
    </bean>
    
    <bean name="prevalentSystem" class="org.springmodules.prevayler.system.DefaultPrevalentSystem" singleton="false">
        <property name="prevalenceInfo" ref="prevalenceInfo"/>
    </bean>
    
    <bean name="prevaylerConfiguration1" class="org.springmodules.prevayler.configuration.PrevaylerConfiguration">
        <property name="prevalentSystem" ref="prevalentSystem"/>
        <property name="prevalenceBase" value="classpath:testPrevalenceBase1"/>
    </bean>
    
    <bean name="prevaylerConfiguration2" class="org.springmodules.prevayler.configuration.PrevaylerConfiguration">
        <property name="prevalentSystem" ref="prevalentSystem"/>
        <property name="prevalenceBase" value="classpath:testPrevalenceBase2"/>
    </bean>
    
    <bean name="basePrevaylerTransactionManager" class="org.springmodules.prevayler.transaction.BasePrevaylerTransactionManager">
        <property name="prevaylerConfiguration" ref="prevaylerConfiguration1"/>
    </bean>
    
    <bean name="threadTransactionManager" class="org.springmodules.prevayler.transaction.ThreadTransactionManager">
        <property name="prevaylerConfiguration" ref="prevaylerConfiguration2"/>
        <property name="secondsTimeout" value="1"/>
    </bean>
    
    <bean name="prevaylerTemplate" class="org.springmodules.prevayler.PrevaylerTemplate">
        <property name="transactionManager" ref="basePrevaylerTransactionManager"/>
    </bean>
    
    <bean name="prevaylerTemplateWithThreadTx" class="org.springmodules.prevayler.PrevaylerTemplate">
        <property name="transactionManager" ref="threadTransactionManager"/>
    </bean>
    
</beans>


