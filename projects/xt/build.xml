<?xml version="1.0"?>

<project name="spring-modules-xt" default="dist">
  
    <property file="build.properties" />
    <property file="project.properties" />
    <property file="${common.build.dir}/build.properties" />
    <property file="${common.build.dir}/project.properties" />
    <property file="${user.home}/build.properties" />

    <import file="${common.build.dir}/common-targets.xml" />
    <import file="${common.build.dir}/doc-targets.xml" />
    
    <target name="compile.post">
      <concat destfile="${basedir}/src/js/springxt.js" force="no">
        <filelist dir="${basedir}/src/js/" 
          files="taconite-client.js, taconite-parser.js, springxt-taconite.js"/>
      </concat>
      <copy todir="${basedir}/../../samples/xt/src/webapp/js" file="${basedir}/src/js/springxt.js"></copy>
    </target>
    
    <target name="jar.post">
      <jar jarfile="${target.lib.dir}/${project.name}-ajax.jar">
        <manifest>
          <attribute name="Implementation-Vendor" value="${org.name}" />
          <attribute name="Implementation-Title" value="${project.title}" />
          <attribute name="Implementation-Version" value="${project.version}" />
        </manifest>
        <fileset dir="${target.classes.dir}">
          <include name="org/springmodules/xt/ajax/**"/>
        </fileset>
      </jar>
      
      <jar jarfile="${target.lib.dir}/${project.name}-modeling.jar">
        <manifest>
          <attribute name="Implementation-Vendor" value="${org.name}" />
          <attribute name="Implementation-Title" value="${project.title}" />
          <attribute name="Implementation-Version" value="${project.version}" />
        </manifest>
        <fileset dir="${target.classes.dir}">
          <include name="org/springmodules/xt/model/**"/>
        </fileset>
      </jar>
      
      <jar jarfile="${target.lib.dir}/${project.name}-utils.jar">
        <manifest>
          <attribute name="Implementation-Vendor" value="${org.name}" />
          <attribute name="Implementation-Title" value="${project.title}" />
          <attribute name="Implementation-Version" value="${project.version}" />
        </manifest>
        <fileset dir="${target.classes.dir}">
          <include name="org/springmodules/xt/utils/**"/>
        </fileset>
      </jar>
  </target>

</project>